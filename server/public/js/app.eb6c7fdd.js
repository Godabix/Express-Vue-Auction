(function(t){function e(e){for(var n,o,r=e[0],c=e[1],u=e[2],d=0,h=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},1:function(t,e){},"16d1":function(t,e,i){},"1ccf":function(t,e,i){"use strict";var n=i("ea57"),a=i.n(n);a.a},"1cff":function(t,e,i){},"21bb":function(t,e,i){"use strict";var n=i("2dad"),a=i.n(n);a.a},"2dad":function(t,e,i){},"2f0f":function(t,e,i){"use strict";var n=i("85fc"),a=i.n(n);a.a},"419e":function(t,e,i){"use strict";var n=i("543e"),a=i.n(n);a.a},"41ba":function(t,e,i){"use strict";var n=i("6622"),a=i.n(n);a.a},"4b62":function(t,e,i){},"543e":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"nav"}},[i("router-link",{staticClass:"routerlinks",attrs:{to:"/"}},[t._v("Home")])],1),i("div",{staticClass:"content-page"},[i("router-view",{staticClass:"content-page"})],1)])},s=[],o=(i("5c0b"),i("2877")),r={},c=Object(o["a"])(r,a,s,!1,null,null,null),u=c.exports,l=i("8c4f"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-page"},[i("div",{staticClass:"home-container"},[i("div",{staticClass:"home-left"},[i("left-panel")],1),i("div",{staticClass:"home-center"},[i("auctions")],1),i("div",{staticClass:"home-right"},[i("right-panel")],1)])])},h=[],p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left-panel"},[t.isAuthenticated?i("div",{staticClass:"user-menu"},[i("button",{staticClass:"menu-button",on:{click:t.navigateToAllAuctions}},[t._v("All auctions")]),i("button",{staticClass:"menu-button",on:{click:t.navigateToMyAuction}},[t._v("My auctions")]),t.wins?i("div",[i("button",{staticClass:"menu-button-red",on:{click:t.navigateToMyHistory}},[t._v("My History")])]):i("div",[i("button",{staticClass:"menu-button",on:{click:t.navigateToMyHistory}},[t._v("My History")])]),i("button",{staticClass:"menu-button",on:{click:t.navigateToCreateAuction}},[t._v("Create Auction")])]):t._e()])},f=[],m=new n["a"],v=m,g=i("8055"),_=i.n(g),y=i("2f62");n["a"].use(y["a"]);var w=new y["a"].Store({state:{isAuthenticated:!1,username:null,wins:!1},mutations:{authenticate:function(t){return localStorage.setItem("isAuthenticated",!0),t.isAuthenticated=!0},unauthenticate:function(t){return localStorage.removeItem("isAuthenticated"),t.isAuthenticated=!1},setUsername:function(t,e){return localStorage.setItem("username",e),t.username=e},removeUsername:function(t){return localStorage.removeItem("username"),console.log("removed username "),t.username=!1},initializeStore:function(t){if(localStorage.getItem("isAuthenticated"))return t.isAuthenticated=!0},initializeUsernameStore:function(t){if(localStorage.getItem("username"))return t.username=localStorage.getItem("username")},deInitializeStore:function(t){if(localStorage.removeItem("isAuthenticated"))return t.isAuthenticated=!1},deInitializeUsernameStore:function(t){if(localStorage.removeItem("username"))return t.username=null},setWins:function(t){return localStorage.setItem("wins",!0),t.wins=!0},initializeWinsStore:function(t){if(localStorage.getItem("wins"))return console.log(localStorage.getItem("wins")),t.wins=localStorage.getItem("wins")},removeWins:function(t){return localStorage.removeItem("wins"),t.wins=!1}},actions:{authenticate:function(t){t.commit("authenticate")},unauthenticate:function(t){t.commit("unauthenticate")},setUsername:function(t,e){t.commit("setUsername",e)},removeUsername:function(t){console.log("removing username "),t.commit("removeUsername")},setWins:function(t){t.commit("setWins")},removeWins:function(t){t.commit("removeWins")}}}),C=w,b={name:"LeftPanel",data:function(){return{isAuthenticated:!1,username:null,socket:null,newHistory:!1,wins:!1}},created:function(){this.authenticate(),this.setupEventBus(),this.socketSetup()},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username,this.wins=this.$store.state.wins},setupEventBus:function(){var t=this;v.$on("authenticateChange",(function(){t.isAuthenticated=t.$store.state.isAuthenticated})),v.$on("wins",(function(){t.wins=t.$store.state.wins}))},socketSetup:function(){this.socket=_()(),this.isAuthenticated&&this.socket.on("buy",(function(){C.dispatch("setWins"),v.$emit("wins")}))},navigateToAllAuctions:function(){window.location.href="/"},navigateToMyAuction:function(){window.location.href="/myauctions"},navigateToMyHistory:function(){C.dispatch("removeWins"),v.$emit("wins"),window.location.href="/myhistory"},navigateToCreateAuction:function(){window.location.href="/create-auction"}}},E=b,$=(i("86eb"),Object(o["a"])(E,p,f,!1,null,null,null)),A=$.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"auctions-list"},[t._l(t.auctions,(function(e){return i("div",{key:e._id},[i("div",{staticClass:"auctions-break"}),i("div",{staticClass:"auctions",on:{click:function(i){return t.navigateToAuction(e)}}},[i("div",{staticClass:"auctions-name"},[i("h1",[t._v(t._s(e.name))])]),i("div",{staticClass:"auctions-price"},[i("p",[t._v("Price: "+t._s(e.price))])]),i("div",{staticClass:"auctions-bidders"},[i("p",[t._v("Bidders: "+t._s(e.bidders.length))])])])])})),i("div",{staticClass:"auctions-break"}),i("div",{staticClass:"auctions-load-div"},[0!=this.auctionsLoaded&&this.auctionsLoaded%10===0?i("button",{staticClass:"auctions-load-button",on:{click:t.loadAuctions}},[t._v("Load Auctions")]):t._e()])],2)},k=[],S=(i("99af"),i("fc8e")),L=i.n(S),P={name:"Auctions",data:function(){return{isAuthenticated:!1,username:null,auctions:null,auctionsLoaded:0}},created:function(){this.authenticate(),this.getInitialData()},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username},getInitialData:function(){var t=this;L.a.post("/api/auction/auctions",{index:this.auctionsLoaded}).then((function(e){t.auctions=e.data,t.auctionsLoaded=t.auctions.length}))},navigateToAuction:function(t){window.location.href="/auction/id:"+t._id},loadAuctions:function(){var t=this;L.a.post("/api/auction/auctions",{index:this.auctionsLoaded}).then((function(e){t.auctions=t.auctions.concat(e.data),t.auctionsLoaded=t.auctions.length}))}}},I=P,D=(i("9c71"),Object(o["a"])(I,x,k,!1,null,null,null)),T=D.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right-panel"},[this.isAuthenticated?i("div",{staticClass:"right-panel-div"},[i("div",{staticClass:"right-panel-box"},[i("p",{domProps:{textContent:t._s("Welcome: "+this.username)}}),i("p",{domProps:{textContent:t._s("Auctions: "+this.auctionCount)}}),i("p",{domProps:{textContent:t._s("Bids: "+this.bidCount)}}),i("button",{staticClass:"right-panel-button",on:{click:t.logout}},[t._v("Logout")]),this.newMessages?i("div",[i("button",{staticClass:"right-panel-button-new",on:{click:t.messenger}},[t._v("Messenger")])]):t._e(),this.newMessages?t._e():i("div",[i("button",{staticClass:"right-panel-button",on:{click:t.messenger}},[t._v("Messenger")])])])]):t._e(),this.isAuthenticated?t._e():i("div",{staticClass:"right-panel-div"},[i("div",{staticClass:"right-panel-box"},[t.loginError?i("span",[i("p",[t._v("Incorrect username or password")])]):t._e(),t.usernameError?i("span",[i("p",[t._v("Please enter username.")])]):t._e(),i("input",{ref:"username-input",staticClass:"input",attrs:{id:"username-input",type:"text",placeholder:"username",required:""}}),t.passwordError?i("span",[i("p",[t._v("Please enter password.")])]):t._e(),i("input",{ref:"password-input",staticClass:"input",attrs:{id:"password-input",type:"password",placeholder:"password",required:""}}),i("button",{staticClass:"right-panel-button",on:{click:t.login}},[t._v("Login")]),t._m(0)])])])},O=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a",[t._v("Not a user? ")]),i("a",{attrs:{href:"/register"}},[t._v("Register")])])}],B={name:"RightPanel",data:function(){return{isAuthenticated:!1,username:null,usernameError:!1,passwordError:!1,loginError:!1,auctionCount:0,bidCount:0,newMessages:!1,socket:null}},created:function(){this.authenticate(),this.setupEventBus(),this.getInitialData(),this.socketSetup()},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username},setupEventBus:function(){var t=this;v.$on("authenticateChange",(function(){t.isAuthenticated=t.$store.state.isAuthenticated,t.username=t.$store.state.username})),v.$on("read-message",(function(){L.a.get("/api/conversations/unread-messages").then((function(e){1==e.data["newMessages"]?t.newMessages=!0:t.newMessages=!1}))}))},getInitialData:function(){var t=this;this.isAuthenticated&&(L.a.get("/api/user-auction-data").then((function(e){console.log(e.data["auctions"]),t.auctionCount=e.data["auctions"]})),L.a.get("/api/user-bid-data").then((function(e){t.bidCount=e.data["bids"]})),L.a.get("/api/conversations/unread-messages").then((function(e){1==e.data["newMessages"]?(t.newMessages=!0,v.$emit("read-message")):t.newMessages=!1})))},socketSetup:function(){var t=this;this.isAuthenticated&&(this.socket=_()(),this.socket.on("new-message",(function(){L.a.get("/api/conversations/unread-messages").then((function(e){1==e.data["newMessages"]?(t.newMessages=!0,v.$emit("read-message")):t.newMessages=!1}))})))},login:function(){var t=this;if(0==this.$refs["username-input"].value.length?this.usernameError=!0:this.usernameError=!1,0==this.$refs["username-input"].value.length?this.passwordError=!0:this.passwordError=!1,!this.usernameError||!this.passwordError){var e={username:this.$refs["username-input"].value,password:this.$refs["password-input"].value};L.a.post("/api/login",e).then((function(e){C.dispatch("authenticate"),C.dispatch("setUsername",e.data.username),v.$emit("authenticateChange",!0),L.a.get("/api/user-auction-data").then((function(e){t.auctionCount=e.data["auctions"]})),L.a.get("/api/user-bid-data").then((function(e){t.bidCount=e.data["bids"]})),L.a.get("/api/conversations/unread-messages").then((function(e){1==e.data["newMessages"]&&(t.newMessages=!0)}))})).catch((function(){t.loginError=!0}))}},logout:function(){L.a.get("/api/logout").then((function(){C.dispatch({type:"unauthenticate"}),C.dispatch({type:"removeUsername"}),v.$emit("authenticateChange",!1),window.location.href="/"}))},messenger:function(){window.location.href="/messenger"}}},j=B,R=(i("2f0f"),Object(o["a"])(j,M,O,!1,null,null,null)),U=R.exports,W={name:"Home",components:{LeftPanel:A,Auctions:T,RightPanel:U}},N=W,H=(i("21bb"),Object(o["a"])(N,d,h,!1,null,null,null)),F=H.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-auctions-page"},[i("div",{staticClass:"my-auctions-container"},[i("div",{staticClass:"my-auctions-left"},[i("left-panel")],1),i("div",{staticClass:"my-auctions-center"},[i("my-auctions")],1),i("div",{staticClass:"my-auctions-right"},[i("right-panel")],1)])])},z=[],q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoading?t._e():i("div",{staticClass:"my-auction-list"},[t._l(this.auctions,(function(e){return i("div",{key:e._id},[i("div",{staticClass:"my-auction-break"}),i("div",{staticClass:"my-auction",on:{click:function(i){return t.navigateToAuction(e)}}},[i("div",{staticClass:"my-auction-name"},[i("h1",[t._v(t._s(e.name))])]),i("div",{staticClass:"my-auction-price"},[i("p",[t._v("Price: "+t._s(e.price))])]),i("div",{staticClass:"my-auction-status"},["NEW"==e.status?i("p",{staticClass:"my-auction-redStatus"},[t._v("NOT STARTED")]):t._e(),"BID"==e.status?i("div",["BID"==e.type?i("p",{staticClass:"my-auction-greenStatus"},[t._v("BIDDERS: "+t._s(e.bidders.length))]):t._e(),"BUY"==e.type?i("p",{staticClass:"my-auction-yellowStatus"},[t._v("NO BUYER")]):t._e()]):t._e()])])])})),i("div",{staticClass:"my-auctions-load-div"},[0!=this.auctionsLoaded&&this.auctionsLoaded%10===0?i("button",{staticClass:"my-auctions-load-button",on:{click:t.loadAuctions}},[t._v("Load Auctions")]):t._e()])],2)},Y=[],J=(i("4160"),i("159b"),{name:"MyAuctions",data:function(){return{isAuthenticated:!1,username:null,auctions:[],auctionsLoaded:0,socket:null}},created:function(){this.authenticate(),this.getInitialData(),this.socketSetup()},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username},getInitialData:function(){var t=this;this.isAuthenticated||(window.location.href="/"),L.a.post("/api/auction/myauctions",{index:this.auctionsLoaded}).then((function(e){t.auctions=t.auctions.concat(e.data),t.auctionsLoaded=t.auctions.length,t.isLoading=!1}))},socketSetup:function(){var t=this;this.isAuthenticated&&(this.socket=_()(),this.socket.on("overbid",(function(e){t.auctions.forEach((function(t){t._id==e._id&&(t.price=e.price)}))})))},navigateToAuction:function(t){window.location.href="/auction/id:"+t._id},loadAuctions:function(){var t=this;L.a.post("/api/auction/myauctions",{index:this.auctionsLoaded}).then((function(e){t.auctions=t.auctions.concat(e.data),t.auctionsLoaded=t.auctions.length}))}}}),K=J,G=(i("419e"),Object(o["a"])(K,q,Y,!1,null,null,null)),Q=G.exports,X={name:"MyAuctionsView",components:{LeftPanel:A,MyAuctions:Q,RightPanel:U}},Z=X,tt=(i("cac0"),Object(o["a"])(Z,V,z,!1,null,null,null)),et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-history-page"},[i("div",{staticClass:"my-history-container"},[i("div",{staticClass:"my-history-left"},[i("left-panel")],1),i("div",{staticClass:"my-history-center"},[i("my-history")],1),i("div",{staticClass:"my-history-right"},[i("right-panel")],1)])])},nt=[],at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoading?t._e():i("div",{ref:"auction-list",staticClass:"my-history-list",attrs:{id:"auction-list"}},[t._l(t.auctions,(function(e){return i("div",{key:e._id},[i("div",{staticClass:"my-history-break"}),i("div",{staticClass:"my-history",on:{click:function(i){return t.navigateToAuction(e)}}},[i("div",{staticClass:"my-history-name"},[i("h1",[t._v(t._s(e.name))])]),i("div",{staticClass:"my-history-price"},[i("p",[t._v("Price: "+t._s(e.price))])]),i("div",{staticClass:"my-history-status"},[e.highest_bidder==t.username?i("p",{staticClass:"my-history-greenStatus"},[t._v("WON")]):t._e(),e.creator!=t.username&&e.highest_bidder!=t.username?i("p",{staticClass:"my-history-redStatus"},[t._v("LOST")]):t._e(),e.creator==t.username&&"SOLD"==e.status?i("p",{staticClass:"my-history-greenStatus"},[t._v("SOLD")]):t._e(),e.creator==t.username&&"FAILED"==e.status?i("p",{staticClass:"my-history-redStatus"},[t._v("FAILED")]):t._e()])])])})),i("div",{staticClass:"my-history-load-div"},[0!=this.auctionsLoaded&&this.auctionsLoaded%10===0?i("button",{staticClass:"my-history-load-button",on:{click:t.loadAuctions}},[t._v("Load Auctions")]):t._e()])],2)},st=[],ot={name:"MyHistory",data:function(){return{isAuthenticated:!1,username:null,isLoading:!0,auctions:[],auctionsLoaded:0}},created:function(){this.authenticate(),this.getInitialDate()},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username},getInitialDate:function(){var t=this;this.isAuthenticated?L.a.post("/api/auction/myhistory",{index:this.auctionsLoaded}).then((function(e){t.auctions=e.data,t.auctionsLoaded=t.auctions.length,t.isLoading=!1})):window.location.href="/"},navigateToAuction:function(t){window.location.href="/auction/id:"+t._id},loadAuctions:function(){var t=this;L.a.post("/api/auction/myhistory",{index:this.auctionsLoaded}).then((function(e){t.auctions=t.auctions.concat(e.data),t.auctionsLoaded=t.auctions.length}))}}},rt=ot,ct=(i("f738"),Object(o["a"])(rt,at,st,!1,null,null,null)),ut=ct.exports,lt={name:"MyHistoryView",components:{LeftPanel:A,MyHistory:ut,RightPanel:U}},dt=lt,ht=(i("c6da"),Object(o["a"])(dt,it,nt,!1,null,null,null)),pt=ht.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create-auction-page"},[i("div",{staticClass:"create-auction-container"},[i("div",{staticClass:"create-auction-left"},[i("left-panel")],1),i("div",{staticClass:"create-auction-center"},[i("create-auction-form")],1),i("div",{staticClass:"create-auction-right"},[i("right-panel")],1)])])},mt=[],vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create-auction-div"},[i("div",{staticClass:"create-auction-box"},[t.nameError?i("span",[i("p",[t._v("Name can't be empty")])]):t._e(),i("input",{ref:"auction-name-input",staticClass:"input",attrs:{id:"auction-name-input",type:"text",placeholder:"auction name",required:""}}),t.infoError?i("span",[i("p",[t._v("Please enter info with less than 51 characters and more than 1/Cannot be empty")])]):t._e(),i("input",{ref:"auction-info-input",staticClass:"input",attrs:{id:"auction-info-input",type:"text",placeholder:"info"}}),t.priceError?i("span",[i("p",[t._v("Price can't be empty/smaller than 0.01")])]):t._e(),i("input",{ref:"auction-price-input",staticClass:"input",attrs:{id:"auction-price-input",type:"number",min:"0.01",step:"0.01",placeholder:"0.01",required:""}}),t.dateError?i("span",[i("p",[t._v("Pick a later date")])]):t._e(),i("input",{ref:"auction-date-input",staticClass:"input",attrs:{id:"auction-date-input",type:"date"}}),t.dateError_2?i("span",[i("p",[t._v("Pick a later date")])]):t._e(),i("input",{ref:"auction-date-input-2",staticClass:"input",attrs:{id:"auction-date-input-2",type:"date"}}),i("div",[t.typeError?i("span",[i("p",[t._v("Please select an option.")])]):t._e(),i("select",{ref:"auction-type-select",attrs:{id:"auction-type-select"}},[i("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Select type")]),i("option",{attrs:{value:"BID"}},[t._v(" Bid type")]),i("option",{attrs:{value:"BUY"}},[t._v("Buy now type")])])]),i("button",{staticClass:"create-auction-button",on:{click:t.start}},[t._v("Start")]),i("button",{staticClass:"create-auction-button",on:{click:t.startNow}},[t._v("Start Now")])])])},gt=[],_t=(i("b680"),i("498a"),{name:"CreateAuctionForm",data:function(){return{isAuthenticated:!1,nameError:!1,priceError:!1,typeError:!1,infoError:!1,dateError:!1,dateError_2:!1}},created:function(){this.authenticate(),this.isAuthenticated||(window.location.href="/")},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated},start:function(){if(0==this.$refs["auction-name-input"].value.length?this.nameError=!0:this.nameError=!1,0==this.$refs["auction-info-input"].value.length||this.$refs["auction-info-input"].value.length>50||""===this.$refs["auction-info-input"].value.trim()?this.infoError=!0:this.infoError=!1,0==this.$refs["auction-price-input"].value.length||this.$refs["auction-price-input"].value<.01||this.$refs["auction-price-input"].value>1e5?this.priceError=!0:this.priceError=!1,""===this.$refs["auction-date-input"].value||new Date(this.$refs["auction-date-input"].value).getTime()<=new Date(Date.now()).getTime()?this.dateError=!0:this.dateError=!1,""===this.$refs["auction-date-input-2"].value||new Date(this.$refs["auction-date-input-2"].value).getTime()<=new Date(Date.now()).getTime()||new Date(this.$refs["auction-date-input-2"].value).getTime()<=new Date(this.$refs["auction-date-input"].value).getTime()?this.dateError_2=!0:this.dateError_2=!1,0==this.$refs["auction-type-select"].options[this.$refs["auction-type-select"].selectedIndex].value.length?this.typeError=!0:this.typeError=!1,!this.nameError&&!this.priceError&&!this.typeError&&!this.infoError&&!this.dateError&&!this.dateError_2){var t={name:this.$refs["auction-name-input"].value,info:this.$refs["auction-info-input"].value,price:parseFloat(this.$refs["auction-price-input"].value).toFixed(2),status:"NEW",start_time:new Date(this.$refs["auction-date-input"].value).getTime(),end_time:new Date(this.$refs["auction-date-input-2"].value).getTime(),type:this.$refs["auction-type-select"].options[this.$refs["auction-type-select"].selectedIndex].value};L.a.post("/api/auction/create",t).then((function(){window.location.href="/myauctions"}))}},startNow:function(){if(0==this.$refs["auction-name-input"].value.length?this.nameError=!0:this.nameError=!1,0==this.$refs["auction-info-input"].value.length||this.$refs["auction-info-input"].value.length>50||""===this.$refs["auction-info-input"].value.trim()?this.infoError=!0:this.infoError=!1,0==this.$refs["auction-price-input"].value.length||this.$refs["auction-price-input"].value<.01||this.$refs["auction-price-input"].value>1e5?this.priceError=!0:this.priceError=!1,""===this.$refs["auction-date-input-2"].value||new Date(this.$refs["auction-date-input-2"].value).getTime()<new Date(Date.now()).getTime()?this.dateError_2=!0:this.dateError_2=!1,0==this.$refs["auction-type-select"].options[this.$refs["auction-type-select"].selectedIndex].value.length?this.typeError=!0:this.typeError=!1,!this.nameError&&!this.priceError&&!this.typeError&&!this.infoError&&!this.dateError_2){var t={name:this.$refs["auction-name-input"].value,info:this.$refs["auction-info-input"].value,price:parseFloat(this.$refs["auction-price-input"].value).toFixed(2),status:"NEW",start_time:new Date(Date.now()).getTime(),end_time:new Date(this.$refs["auction-date-input-2"].value).getTime(),type:this.$refs["auction-type-select"].options[this.$refs["auction-type-select"].selectedIndex].value};L.a.post("/api/auction/create",t).then((function(){window.location.href="/myauctions"}))}}}}),yt=_t,wt=(i("b81d"),Object(o["a"])(yt,vt,gt,!1,null,null,null)),Ct=wt.exports,bt={name:"CreateAuctionView",components:{LeftPanel:A,RightPanel:U,CreateAuctionForm:Ct}},Et=bt,$t=(i("7285"),Object(o["a"])(Et,ft,mt,!1,null,null,null)),At=$t.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"auction-page"},[i("div",{staticClass:"auction-container"},[i("div",{staticClass:"auction-left"},[i("left-panel")],1),i("div",{staticClass:"auction-center"},[i("auction")],1),i("div",{staticClass:"auction-right"},[i("right-panel")],1)])])},kt=[],St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"auction-div"},[t.isLoading||null==t.auction?t._e():i("div",{staticClass:"auction-box"},[i("h1",[t._v("Auction")]),i("p",{domProps:{textContent:t._s("Name: "+t.auction.name)}}),i("p",{domProps:{textContent:t._s("Info: "+t.auction.info)}}),i("p",{domProps:{textContent:t._s("Price: "+t.auction.price)}}),i("p",{domProps:{textContent:t._s("Type: "+t.auction.type)}}),i("p",{domProps:{textContent:t._s("Creator: "+t.auction.creator)}}),"BID"==t.auction.status&&null!=this.time_left?i("p",{domProps:{textContent:t._s("Time left: "+this.time_left)}}):i("p",{domProps:{textContent:t._s(new Date(this.auction.start_time).toDateString())}}),t.isAuthenticated&&t.auction.creator==t.username&&"NEW"==t.auction.status?i("div",[i("button",{staticClass:"auction-button",on:{click:t.edit}},[t._v("Edit")]),i("button",{staticClass:"auction-button",on:{click:t.cancel}},[t._v("Cancel auction")])]):t._e(),t.isAuthenticated&&t.auction.creator==t.username&&"SOLD"==t.auction.status?i("div",[i("button",{staticClass:"auction-button",on:{click:t.newConversation}},[t._v("Contact buyer")])]):t._e(),t.isAuthenticated&&!t.isLoading&&t.auction.creator!=t.username?i("div",["BID"==t.auction.type&&"BID"==t.auction.status?i("div",[i("input",{ref:"auction-bid-input",staticClass:"input",attrs:{id:"auction-bid-input",type:"number",min:t.auction.price+.01,step:"0.01",placeholder:t.auction.price,required:""}}),i("button",{staticClass:"auction-button",on:{click:t.bid}},[t._v("Bid")])]):t._e(),"BUY"==t.auction.type&&"BID"==t.auction.status?i("div",[i("button",{staticClass:"auction-button",on:{click:t.buy}},[t._v("Buy now")])]):t._e(),t.auction.creator!=t.username?i("div",[i("button",{staticClass:"auction-button",on:{click:t.newConversation}},[t._v("Contact seller")])]):t._e()]):t._e()])])},Lt=[],Pt=(i("fb6a"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),{name:"Auction",data:function(){return{isAuthenticated:!1,isLoading:!0,username:null,time_left:null,timer:null,auction:null,socket:_()()}},created:function(){var t=this;this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username;var e={index:window.location.href.split("id:").slice(-1)[0].toString()};L.a.post("/api/auction/auction",e).then((function(e){e.data["auction"]?t.auction=e.data["auction"]:window.location.href="/",null!=t.auction.end_time&&new Date(t.auction.end_time).getTime()>=(new Date).getTime()&&(t.timer=setInterval((function(){var e=(new Date).getTime(),i=new Date(t.auction.end_time),n=i-e,a=Math.floor(n%864e5/36e5),s=Math.floor(n%36e5/6e4),o=Math.floor(n%6e4/1e3),r=a.toString(),c=s.toString(),u=o.toString();1==r.length&&(r="0"+r),1==c.length&&(c="0"+c),1==u.length&&(u="0"+u),t.time_left=r+":"+c+":"+u,n<=0&&(clearInterval(t.timer),window.location.href="/")}))),t.isAuthenticated&&null!=t.auction&&"BID"==t.auction.status&&(t.socket.emit("join-auction",{_id:t.auction._id}),t.socket.on("new-bid",(function(){L.a.post("/api/auction/auction-price",{_id:t.auction._id}).then((function(e){t.auction.price=e.data["price"]}))})),t.socket.on("leave",(function(){window.location.href="/"}))),window.onbeforeunload=function(){t.isAuthenticated&&t.socket.emit("leave-auction",{_id:t.auction._id})},t.isLoading=!1}))},methods:{buy:function(){var t={_id:this.auction._id};this.socket.emit("bought",t)},edit:function(){var t="/edit-auction/id:"+this.auction._id;window.location.href=t},bid:function(){this.socket.emit("auction-bid",{_id:this.auction._id,new_bid:this.$refs["auction-bid-input"].value})},cancel:function(){var t={_id:this.auction._id};L.a.post("/api/auction/cancel",t).then((function(){})),window.location.href="/myauctions"},newConversation:function(){var t;t=this.auction.creator!=this.username?{users:[this.auction.creator,this.username]}:{users:[this.auction.creator,this.auction.highest_bidder]},L.a.post("/api/conversations/conversation-create",t).then((function(){window.location.href="/messenger"}))}}}),It=Pt,Dt=(i("98bb"),Object(o["a"])(It,St,Lt,!1,null,null,null)),Tt=Dt.exports,Mt={name:"AuctionView",components:{LeftPanel:A,Auction:Tt,RightPanel:U}},Ot=Mt,Bt=(i("8ee4"),Object(o["a"])(Ot,xt,kt,!1,null,null,null)),jt=Bt.exports,Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"auction-edit-page"},[i("div",{staticClass:"auction-edit-container"},[i("div",{staticClass:"auction-edit-left"},[i("left-panel")],1),i("div",{staticClass:"auction-edit-center"},[i("edit-auction-form",{attrs:{isLoading:!0}})],1),i("div",{staticClass:"auction-edit-right"},[i("right-panel")],1)])])},Ut=[],Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-auction-div"},[null==t.auction||t.isLoading||"NEW"!=t.auction.status||t.auction.creator!=t.username?t._e():i("div",{staticClass:"edit-auction-box"},[i("h1",[t._v("Auction")]),i("input",{ref:"auction-name-input",staticClass:"input",attrs:{id:"auction-name-input",type:"text",placeholder:t.auction.name}}),t.infoError?i("span",[i("p",[t._v("Please enter info with less than 51 characters / Cannot be empty")])]):t._e(),i("input",{ref:"auction-info-input",staticClass:"input",attrs:{id:"auction-info-input",type:"text",placeholder:"info"}}),t.priceError?i("span",[i("p",[t._v("Please enter price bigger than 0.00")])]):t._e(),i("input",{ref:"auction-price-input",staticClass:"input",attrs:{id:"auction-price-input",type:"number",min:"0.01",step:"0.01",placeholder:t.auction.price}}),i("p",{domProps:{textContent:t._s("Type: "+t.auction.type)}}),i("div",{staticClass:"select-type"},[i("select",{ref:"auction-type-select",attrs:{id:"auction-type-select"}},[i("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Select type")]),i("option",{attrs:{value:"BID"}},[t._v(" Bid type")]),i("option",{attrs:{value:"BUY"}},[t._v("Buy now type")])])]),i("p",{domProps:{textContent:t._s("Creator: "+t.auction.creator)}}),i("div",[i("button",{staticClass:"edit-auction-button",on:{click:t.cancel}},[t._v("Cancel")]),i("button",{staticClass:"edit-auction-button",on:{click:t.apply}},[t._v("Apply Changes")])])])])},Nt=[],Ht=(i("b0c0"),{name:"EditAuctionForm.vue",data:function(){return{isAuthenticated:!1,username:null,isLoading:!0,priceError:!1,infoError:!1,auction:null}},created:function(){this.authenticate(),this.getInitialData()},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username},getInitialData:function(){var t=this;this.isAuthenticated||(window.location.href="/");var e={index:window.location.href.split("id:").slice(-1)[0].toString()};L.a.post("/api/auction/auction",e).then((function(e){t.auction=e.data["auction"],t.isLoading=!1}))},cancel:function(){var t="/auction/id:"+this.auction._id;window.location.href=t},apply:function(){if(0!=this.$refs["auction-name-input"].value.length&&(this.auction.name=this.$refs["auction-name-input"].value),this.$refs["auction-info-input"].value.length>50||""===this.$refs["auction-info-input"].value.trim()?this.infoError=!0:(this.infoError=!1,this.$refs["auction-info-input"].value.length>0&&(this.auction.info=this.$refs["auction-info-input"].value)),(this.$refs["auction-price-input"].value<.01||this.$refs["auction-price-input"].value>1e5)&&this.$refs["auction-price-input"].value.length>0?this.priceError=!0:(this.priceError=!1,0!=this.$refs["auction-price-input"].value.length&&(this.auction.price=this.$refs["auction-price-input"].value)),0!=this.$refs["auction-type-select"].options[this.$refs["auction-type-select"].selectedIndex].value.length&&(this.auction.type=this.$refs["auction-type-select"].options[this.$refs["auction-type-select"].selectedIndex].value),!this.priceError&&!this.infoError){var t={_id:this.auction._id,name:this.auction.name,info:this.auction.info,price:parseFloat(this.auction.price).toFixed(2),type:this.auction.type};L.a.post("/api/auction/edit",t).then((function(){}));var e="/auction/id:"+this.auction._id;window.location.href=e}}}}),Ft=Ht,Vt=(i("64c6"),Object(o["a"])(Ft,Wt,Nt,!1,null,null,null)),zt=Vt.exports,qt={name:"AuctionEditView",components:{LeftPanel:A,EditAuctionForm:zt,RightPanel:U}},Yt=qt,Jt=(i("41ba"),Object(o["a"])(Yt,Rt,Ut,!1,null,null,null)),Kt=Jt.exports,Gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-page"},[i("div",{staticClass:"messenger-container"},[i("div",{staticClass:"messenger-left"},[i("left-panel")],1),i("div",{staticClass:"messenger-center"},[i("messenger")],1),i("div",{staticClass:"messenger-right"},[i("right-panel")],1)])])},Qt=[],Xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-page"},[t.isLoading||t.show_conversation?t._e():i("div",{staticClass:"messenger-div"},[0==this.conversations.length?i("p",[t._v("No conversations.")]):t._e(),t._l(this.conversations,(function(e){return i("div",{key:e._id},[e.unread==t.username?i("div",{staticClass:"conversation-unread",on:{click:function(i){return t.chat(e)}}},[i("p",{domProps:{textContent:t._s(e.users.find((function(e){if(e!=t.username)return e})))}})]):i("div",{staticClass:"conversation",on:{click:function(i){return t.chat(e)}}},[i("p",{domProps:{textContent:t._s(e.users.find((function(e){if(e!=t.username)return e})))}})])])}))],2),t.isAuthenticated&&t.show_conversation?i("div",{staticClass:"chat-div"},[i("div",{ref:"chat-box",staticClass:"chatbox",attrs:{id:"chat-box"}},t._l(this.messages,(function(e){return i("div",{key:e._id,staticClass:"messages"},[e.from==t.username?i("p",{staticClass:"user1Message",domProps:{textContent:t._s(e.from+":\n"+e.text)}}):i("p",{staticClass:"user2Message",domProps:{textContent:t._s(e.from+":\n"+e.text)}})])})),0),i("div",{staticClass:"bottom-menu"},[i("input",{ref:"chat-input",staticClass:"chat-input",attrs:{id:"chat-input",type:"text"}}),i("button",{staticClass:"chat-button",on:{click:t.send}},[t._v("SEND")]),i("button",{staticClass:"chat-button",on:{click:t.back}},[t._v("BACK")])])]):t._e()])},Zt=[],te={name:"Messenger",data:function(){return{isAuthenticated:!1,username:null,userTo:null,nameError:!1,priceError:!1,typeError:!1,conversations:[],show_conversation:!1,conversation_id:null,messages:null,socket:null}},created:function(){this.authenticate(),this.getInitialData(),this.socketSetup()},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated,this.username=this.$store.state.username},getInitialData:function(){var t=this;this.isAuthenticated||(window.location.href="/"),L.a.get("/api/conversations/conversations").then((function(e){t.conversations=e.data,t.isLoading=!1}))},socketSetup:function(){this.isAuthenticated&&(this.socket=_()())},chat:function(t){var e=this;this.show_conversation=!0;var i="";i=t.users[0]!=this.username?t.users[0]:t.users[1],this.userTo=i;var n={from:this.username,to:i};t.unread==this.username&&L.a.post("/api/conversations/read-messages",n).then((function(){v.$emit("read-message")})),this.socket.on("receive-message",(function(t){e.messages.push(t),document.getElementById("chat-box").scrollTop=1e3,L.a.post("/api/conversations/read-messages",{from:t.from,to:t.to}).then((function(){v.$emit("read-message")}))})),L.a.post("/api/conversations/messages",n).then((function(t){e.messages=t.data,document.getElementById("chat-box").scrollTop=1e3})),window.onbeforeunload=function(){e.socket.emit("leave-chat",{_id:e.conversation_id}),e.socket.disconnect(!0)},L.a.post("/api/conversations/conversation",{users:t.users}).then((function(t){e.socket.emit("join-chat",{_id:t.data._id}),e.conversation_id=t.data._id}))},back:function(){var t=this;this.socket.emit("leave-chat",{_id:this.conversation_id}),this.show_conversation=!1,this.messages=null,this.userTo=null,this.socket=_()(),L.a.get("/api/conversations/conversations").then((function(e){t.conversations=e.data}))},send:function(){if(this.$refs["chat-input"].value.length>0){var t={_id:this.conversation_id,from:this.username,to:this.userTo,text:this.$refs["chat-input"].value};this.$refs["chat-input"].value="",this.socket.emit("send-message",t),document.getElementById("chat-box").scrollTop=1e3}}}},ee=te,ie=(i("bb7a"),Object(o["a"])(ee,Xt,Zt,!1,null,null,null)),ne=ie.exports,ae={name:"MessengerView",components:{LeftPanel:A,Messenger:ne,RightPanel:U}},se=ae,oe=(i("833e"),Object(o["a"])(se,Gt,Qt,!1,null,null,null)),re=oe.exports,ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-page"},[i("div",{staticClass:"home-container"},[i("register-form")],1)])},ue=[],le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isAuthenticated?t._e():i("div",{staticClass:"register-div"},[i("div",{staticClass:"register-box"},[i("h1",[t._v("Register")]),t.loginError?i("span",[i("p",[t._v("Username exists!")])]):t._e(),t.usernameError?i("span",[i("p",[t._v("Please enter username.")])]):t._e(),i("input",{ref:"username-input",staticClass:"input",attrs:{id:"username-input",type:"text",placeholder:"username",required:""}}),t.passwordError?i("span",[i("p",[t._v("Please enter password.")])]):t._e(),i("input",{ref:"password-input",staticClass:"input",attrs:{id:"password-input",type:"password",placeholder:"password",required:""}}),i("button",{staticClass:"register-button",on:{click:t.register}},[t._v("Register")]),t._m(0)])])},de=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a",[t._v("Have an account?")]),i("a",{attrs:{href:"/"}},[t._v("Login")])])}],he={name:"Login",data:function(){return{isAuthenticated:!1,usernameError:!1,passwordError:!1,loginError:!1}},created:function(){this.authenticate(),this.isAuthenticated&&(window.location.href="/")},methods:{authenticate:function(){this.isAuthenticated=this.$store.state.isAuthenticated},register:function(){var t=this;this.loginError=!1;var e={username:this.$refs["username-input"].value,password:this.$refs["password-input"].value};0==this.$refs["username-input"].value.length?this.usernameError=!0:this.usernameError=!1,0==this.$refs["password-input"].value.length?this.passwordError=!0:this.passwordError=!1,this.loginError||this.usernameError||this.passwordError||L.a.post("/api/user-exists",{username:e["username"]}).then((function(i){t.loginError=i.data["loginError"],t.loginError||L.a.post("/api/register",e).then((function(e){t.passwordError=e.data["passwordError"],t.usernameError=e.data["usernameError"],t.loginError||t.loginError||t.passwordError||(window.location.href="/")}))}))}}},pe=he,fe=(i("9bcf"),Object(o["a"])(pe,le,de,!1,null,null,null)),me=fe.exports,ve={name:"RegisterView",components:{RegisterForm:me}},ge=ve,_e=(i("1ccf"),Object(o["a"])(ge,ce,ue,!1,null,null,null)),ye=_e.exports;n["a"].use(l["a"]);var we=[{path:"/",name:"Home",component:F},{path:"/register",name:"Register",component:ye},{path:"/myauctions",name:"MyAuctions",component:et},{path:"/myhistory",name:"MyHistory",component:pt},{path:"/create-auction",name:"CreateAuction",component:At},{path:"/auction/id:(\\w+)",name:"AuctionView",component:jt},{path:"/edit-auction/id:(\\w+)",name:"AuctionEditView",component:Kt},{path:"/messenger",name:"MessengerView",component:re}],Ce=new l["a"]({mode:"history",base:"/",routes:we}),be=Ce;n["a"].config.productionTip=!1,new n["a"]({router:be,store:C,beforeCreate:function(){this.$store.commit("initializeStore"),this.$store.commit("initializeUsernameStore"),this.$store.commit("initializeWinsStore")},render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("9c0c"),a=i.n(n);a.a},"61b4":function(t,e,i){},"635c":function(t,e,i){},"64c6":function(t,e,i){"use strict";var n=i("dac3"),a=i.n(n);a.a},6622:function(t,e,i){},"6a18":function(t,e,i){},7285:function(t,e,i){"use strict";var n=i("e2d0"),a=i.n(n);a.a},"833e":function(t,e,i){"use strict";var n=i("61b4"),a=i.n(n);a.a},8474:function(t,e,i){},"85fc":function(t,e,i){},"86eb":function(t,e,i){"use strict";var n=i("d4d2"),a=i.n(n);a.a},"8ee4":function(t,e,i){"use strict";var n=i("8474"),a=i.n(n);a.a},9133:function(t,e,i){},"98bb":function(t,e,i){"use strict";var n=i("9133"),a=i.n(n);a.a},"9bcf":function(t,e,i){"use strict";var n=i("1cff"),a=i.n(n);a.a},"9c0c":function(t,e,i){},"9c71":function(t,e,i){"use strict";var n=i("a6cf"),a=i.n(n);a.a},a6cf:function(t,e,i){},b81d:function(t,e,i){"use strict";var n=i("6a18"),a=i.n(n);a.a},bb7a:function(t,e,i){"use strict";var n=i("635c"),a=i.n(n);a.a},c6da:function(t,e,i){"use strict";var n=i("d2eb"),a=i.n(n);a.a},cac0:function(t,e,i){"use strict";var n=i("4b62"),a=i.n(n);a.a},d2eb:function(t,e,i){},d4d2:function(t,e,i){},dac3:function(t,e,i){},e2d0:function(t,e,i){},ea57:function(t,e,i){},f738:function(t,e,i){"use strict";var n=i("16d1"),a=i.n(n);a.a}});
//# sourceMappingURL=app.eb6c7fdd.js.map